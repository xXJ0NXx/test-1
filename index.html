<!DOCTYPE html>
<html lang="en">
<head>
  <title>PixelCraft + Eaglercraft Hybrid</title>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="A hybrid of PixelCraft and Eaglercraft. Play Minecraft 1.5.2 in your browser with multiplayer and RSA encryption." />
  <meta name="author" content="lax1dude + ayunami" />

  <!-- PixelCraft core libraries -->
  <script src="jsbn/jsbn.js"></script>
  <script src="jsbn/jsbn2.js"></script>
  <script src="jsbn/base64.js"></script>
  <script src="jsbn/prng4.js"></script>
  <script src="jsbn/rng.js"></script>
  <script src="jsbn/rsa.js"></script>
  <script src="jsbn/rsa2.js"></script>
  <script src="asn1-parser.js"></script>
  <script src="music.js"></script>

  <!-- Shared class logic -->
  <script src="classes.js"></script>
  <!-- Optional Eaglercraft networking -->
  <script src="eagswebrtc.js"></script>
</head>

<body style="margin:0;width:100vw;height:100vh;" id="game_frame"></body>

<script>
var name="PixelCraft", motd="A public 1.5.2 server", ip="pixelcraft.me";

window.addEventListener("load", function(){
  document.requestPointerLock = document.requestPointerLock || function(){};
  document.exitPointerLock = document.exitPointerLock || function(){};

  // Combine PixelCraft startup with Eaglercraft relays
  const relayId = Math.floor(Math.random() * 3);
  window.eaglerRelays = [
    { addr: "wss://relay.deev.is/", name: "relay #1", primary: relayId == 0 },
    { addr: "wss://relay.lax1dude.net/", name: "relay #2", primary: relayId == 1 },
    { addr: "wss://relay.shhnowisnottheti.me/", name: "relay #3", primary: relayId == 2 }
  ];

  // PixelCraft startup configuration
  window.minecraftOpts = [
    "game_frame","assets.epk",
    btoa(atob("CgAACQAHc2VydmVycwoAAAABCAAKZm9yY2VkTU9URABtb3RkaGVyZQEAC2hpZGVBZGRyZXNzAQgAAmlwAGlwaGVyZQgABG5hbWUAbmFtZWhlcmUAAA==")
      .replace("motdhere", String.fromCharCode(motd.length)+motd)
      .replace("namehere", String.fromCharCode(name.length)+name)
      .replace("iphere", String.fromCharCode(ip.length)+ip))
  ];

  // Support URL ?server= query parameter
  var q = new URLSearchParams(window.location.search);
  if(q.has("server")) window.minecraftOpts.push(q.get("server"));

  main();
});
</script>
</html>